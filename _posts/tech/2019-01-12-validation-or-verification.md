---
title:  "検証と妥当性確認"
date:   2019-01-12 11:55:00 +0900
category: tech
tags: test poem
layout: post
---


>ソフトウェアのバグの75%はロジックの見落としが原因で、ロジックの誤りは25%に過ぎない。
>したがって、ユニットテストで検証できるバグは全体の25%である。

(https://twitter.com/masayh/status/1081082799581409282)

このツイートに関して興味深かったので少し掘り下げて自分の考えを書いておこうと思います。

特に新しいことは言っていません。

## このツイートが言いたかったこと

数値的根拠は不明ですが、感覚的にはその通りだと感じます。

私なりの解釈ですが、

* 仕様が正しく実装されているか確認すること
* 定義した仕様が本当に正しいのかを確認すること

前者が25%で、後者が75%と言いたいのだと思います。

前者はverification、後者はvalidationと言います。

ソフトウェア開発プロセスのV字モデルで考えると、
詳細設計の不具合が25%で、要求定義、基本設計での不具合が75%ということになります。

## 要求定義/基本設計での不具合をなくすためにすべきこと

主張には要求定義/基本設計の不具合ばっか出るという嘆きに見えますが、ではどうすればいいのか。

根本的には、作った後のことを想像して(場合によってはしてもらって)問題になりそうな部分を洗い出すこと、を上手くやることです。

どんな方法にしろ、洗い出しはどのプロジェクトでもやっていると思いますので今更感はあります。

ただ、機械的にできていない以上、どう頑張っても属人性は排除できないため、上手くやることを考えること以上はできないでしょう。

アジャイルはそれを上手くやる方法の一種だと思いますが、人間がやってる以上、属人性は排除できていないため、完ぺきではありません。
人命にかかわるプロジェクトでこの開発方法を適用するのも難しいでしょう。

機械的に要求定義、基本設計をすることの実現は研究者に任せるとして、一般技術者は想像力を育む方法を考えた方が生産的かと思います。

ということで、やれることは結局のところこれまでと変わらず、

* シミュレーション(数値解析的な)する
* ユースケースシナリオを作成する
* モックでユーザの反応を見る
* アジャイルで動くものを作る
* 過去の事故事例を参考にする
* 最悪ケースを想定する
* 趣味でとにかく作る
* レビューで他人の観点を取り入れる

ということになります。

## まとめ

設計をしっかりするために、作った後のことを十分に想像しよう。

想像するために、レビューやシナリオやシミュレーションや過去事例を思い出しましょう。

以上です。

なお、ロジックはユニットテストでテストできないという意見を目にしましたが、
ここでいうロジックの誤りとは仕様通りに動いているかを確認することだと思います。
したがって、詳細設計の仕様通り動いているか確認できるため、間違っていないと思います。

主張が、ロジックの誤りと漏れの差が、基本設計の誤りと漏れのことに見えるので、
その意味では主張は明らかに誤りではあります。
ただ言葉の厳密さはあんまり気にしないツイッターの場ですので、
verificationとvalidationの差を言っている、と解釈した方がいいかと。

